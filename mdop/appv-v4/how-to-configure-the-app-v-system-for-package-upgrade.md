---
title: 如何为程序包升级配置 App-V System
description: 如何为程序包升级配置 App-V System
author: dansimp
ms.assetid: de133898-f887-46c1-9bc9-fbb03feac66a
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, appcompat, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 06/16/2016
ms.openlocfilehash: 5e5056f923c61aff39d9bd6e1d26f071177f7c12
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/26/2020
ms.locfileid: "10801580"
---
# <span data-ttu-id="a5d38-103">如何为程序包升级配置 App-V System</span><span class="sxs-lookup"><span data-stu-id="a5d38-103">How to Configure the App-V System for Package Upgrade</span></span>


<span data-ttu-id="a5d38-104">当你部署已在 App-v Sequencer 中升级的现有应用程序包的新版本时，你可以部署它，以便应用 V 客户端将新版本自动传输到本地缓存。</span><span class="sxs-lookup"><span data-stu-id="a5d38-104">When you deploy a new version of an existing application package that has been upgraded in the App-V Sequencer, you can deploy it so that the App-V clients automatically stream the new version to the local cache.</span></span> <span data-ttu-id="a5d38-105">根据你使用的流式处理解决方案，配置程序包升级有不同的过程。</span><span class="sxs-lookup"><span data-stu-id="a5d38-105">Depending on the streaming solution you use, there are different procedures for configuring the package upgrade.</span></span> <span data-ttu-id="a5d38-106">以下部分介绍了发布和流式处理的最典型方案，并包括为每个方案配置程序包升级所需的过程。</span><span class="sxs-lookup"><span data-stu-id="a5d38-106">The following sections describe the most typical scenarios for publishing and streaming, and include the procedures necessary for configuring the package upgrade for each scenario.</span></span>

## <span data-ttu-id="a5d38-107">对发布和流式处理使用管理服务器</span><span class="sxs-lookup"><span data-stu-id="a5d38-107">Using a Management Server for both publishing and streaming</span></span>


<span data-ttu-id="a5d38-108">在此方案中，单个 App-v 管理服务器用于程序包和应用程序的发布和流处理，并且需要 RTSP 协议。</span><span class="sxs-lookup"><span data-stu-id="a5d38-108">In this scenario, a single App-V Management Server is used for both publishing and streaming of packages and applications, and the RTSP(S) protocol is required.</span></span> <span data-ttu-id="a5d38-109">将原始程序包导入到 app-v 管理服务器时，管理员会将包含由 sequencer 创建的文件的程序包文件夹复制到 "内容" 文件夹，例如 \\\\server\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="a5d38-109">When the original package is imported to the App-V Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="a5d38-110">管理员还可以编辑 OSD 文件中的 HREF 条目，以指向程序包文件夹中的 SFT 文件，然后将程序包导入到服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-110">The administrator also edits the HREF entry in the OSD file to point to the SFT file in the package folder, and then imports the package to the server.</span></span>

<span data-ttu-id="a5d38-111">当用户通过管理服务器进行身份验证时，服务器将通过向客户端发送 applist.xml 文件来发布用户的应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-111">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="a5d38-112">然后，客户端从管理服务器检索应用程序的 OSD 文件和图标。</span><span class="sxs-lookup"><span data-stu-id="a5d38-112">The client then retrieves the OSD files and icons for the applications from the Management Server.</span></span> <span data-ttu-id="a5d38-113">当用户双击应用程序图标时，应用程序内容将从 OSD 文件中指定的路径传输到客户端缓存，并启动应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-113">When the user double-clicks an application icon, the application content is streamed to the client cache from the path that is specified in the OSD file, and the application is started.</span></span>

### <span data-ttu-id="a5d38-114">升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-114">To upgrade the package</span></span>

<span data-ttu-id="a5d38-115">若要在 App-v Sequencer 中添加已升级的应用程序的新版本，管理员必须将新的 SFT 文件和任何其他已修改的文件复制到与应用程序的原始版本相同的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="a5d38-115">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new SFT file and any other modified files to the same folder as the original version of the application.</span></span> <span data-ttu-id="a5d38-116">管理员随后将使用服务器管理控制台中的 "**添加版本**" 添加程序包的新版本。</span><span class="sxs-lookup"><span data-stu-id="a5d38-116">The administrator will then use **Add Version** in the server management console to add the new version of the package.</span></span>

<span data-ttu-id="a5d38-117">当用户下一次启动应用程序时，服务器会自动将新版本流到客户端。</span><span class="sxs-lookup"><span data-stu-id="a5d38-117">When the user next starts the application, the server streams the new version to the client automatically.</span></span> <span data-ttu-id="a5d38-118">此特定的升级程序包的方法以前称为 "活动升级"。</span><span class="sxs-lookup"><span data-stu-id="a5d38-118">This specific method of upgrading a package was formerly known as an active upgrade.</span></span>

## <span data-ttu-id="a5d38-119">使用管理服务器发布和流式处理服务器进行流处理</span><span class="sxs-lookup"><span data-stu-id="a5d38-119">Using a Management Server for publishing and a Streaming Server for streaming</span></span>


<span data-ttu-id="a5d38-120">在此方案中，app-v 管理服务器用于发布程序包，而流式处理服务器用于流式处理程序包和应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-120">In this scenario, the App-V Management Server is used for publishing the packages, and the Streaming Server is used for streaming packages and applications.</span></span> <span data-ttu-id="a5d38-121">需要 RTSP 协议。</span><span class="sxs-lookup"><span data-stu-id="a5d38-121">The RTSP(S) protocol is required.</span></span> <span data-ttu-id="a5d38-122">将原始程序包导入管理服务器时，管理员会将包含由 sequencer 创建的文件的程序包文件夹复制到 "内容" 文件夹中，例如 "\\\\server\\CONTENT\\packagename."。</span><span class="sxs-lookup"><span data-stu-id="a5d38-122">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="a5d38-123">管理员编辑 OSD 文件中的 HREF 条目，以指向流服务器上的 SFT 文件，然后将程序包导入到管理服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-123">The administrator edits the HREF entry in the OSD file to point to the SFT file on the Streaming Server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="a5d38-124">若要设置流式服务器，管理员将程序包文件夹从管理服务器复制到流服务器上的内容文件夹。</span><span class="sxs-lookup"><span data-stu-id="a5d38-124">To set up the Streaming Server, the administrator copies the package folder from the Management Server to the CONTENT folder on the Streaming Server.</span></span> <span data-ttu-id="a5d38-125">此文件夹在流服务器的内容文件夹下的名称和相对路径必须与管理服务器上的名称和相对路径相同，例如，\\\\streamingserver\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="a5d38-125">This folder must have the same name and relative path under the Streaming Server’s CONTENT folder as on the Management Server, for example, \\\\streamingserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="a5d38-126">如果客户端的 "应用程序源根（ASR）" 设置配置为指向流服务器，客户端将使用此设置，而不是在 OSD 文件中的 HREF 条目中使用服务器名称。</span><span class="sxs-lookup"><span data-stu-id="a5d38-126">If the client’s Application Source Root (ASR) setting is configured to point to the Streaming Server, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="a5d38-127">客户端上的 ISR 和 OSR 字段可以配置为指向管理服务器或流式服务器，具体取决于所使用的特定系统体系结构。</span><span class="sxs-lookup"><span data-stu-id="a5d38-127">The ISR and OSR fields on the client can optionally be configured to point to either the Management Server or the Streaming Server, depending on the specific system architecture that is used.</span></span>

<span data-ttu-id="a5d38-128">当用户通过管理服务器进行身份验证时，服务器将通过向客户端发送 applist.xml 文件来发布用户的应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-128">When a user is authenticated by the Management Server, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="a5d38-129">客户端从流式服务器或管理服务器检索应用程序的 OSD 文件和图标，具体取决于 OSR 和 ISR 字段中的设置。</span><span class="sxs-lookup"><span data-stu-id="a5d38-129">The client retrieves the OSD files and icons for the applications from either the Streaming Server or the Management Server, depending on the settings in the OSR and ISR fields.</span></span>

<span data-ttu-id="a5d38-130">当用户双击应用程序图标时，客户端将使用包含在 OSD 文件 HREF 元素中的程序包内容文件（SFT）的路径。</span><span class="sxs-lookup"><span data-stu-id="a5d38-130">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="a5d38-131">如果使用 ASR，客户将使用在 ASR 中指定的流式处理服务器的路径替换 HREF 元素中的服务器名称（以及端口和协议，如果使用）。</span><span class="sxs-lookup"><span data-stu-id="a5d38-131">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the Streaming Server that is specified in the ASR.</span></span> <span data-ttu-id="a5d38-132">然后，应用程序从流服务器传输到客户端缓存并启动。</span><span class="sxs-lookup"><span data-stu-id="a5d38-132">The application is then streamed from the Streaming Server to the client cache and is started.</span></span>

### <span data-ttu-id="a5d38-133">升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-133">To upgrade the package</span></span>

<span data-ttu-id="a5d38-134">若要在 App-v Sequencer 中添加已升级的应用程序的新版本，管理员必须将新版本的 SFT 文件和任何其他已修改的文件复制到与流服务器上的应用程序的原始版本相同的文件夹中。</span><span class="sxs-lookup"><span data-stu-id="a5d38-134">To add a new version of an application that has been upgraded in the App-V Sequencer, the administrator must copy the new version of the SFT file and any other modified files to the same folder as the original version of the application on the Streaming Server.</span></span>

<span data-ttu-id="a5d38-135">为保持一致性，建议将新文件复制到管理服务器上的文件夹。</span><span class="sxs-lookup"><span data-stu-id="a5d38-135">For consistency, we recommend that you copy new files to the folder on the Management Server as well.</span></span> <span data-ttu-id="a5d38-136">尤其是，如果你使用客户端的 OSR 或 ISR 字段，请将更新的 OSD 文件和图标复制到 OSR 和 ISR 字段中指定的服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-136">In particular, if you use the client’s OSR or ISR fields, copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

<span data-ttu-id="a5d38-137">流服务器检测到新版本后，下次用户启动应用程序时，服务器会自动将新版本流到客户端。</span><span class="sxs-lookup"><span data-stu-id="a5d38-137">After the Streaming Server detects the new version, the next time the user starts the application, the server streams the new version to the client automatically.</span></span>

## <span data-ttu-id="a5d38-138">使用用于发布的管理服务器和用于流式处理的 IIS 服务器</span><span class="sxs-lookup"><span data-stu-id="a5d38-138">Using a Management Server for publishing and an IIS Server for streaming</span></span>


<span data-ttu-id="a5d38-139">在此方案中，app-v 管理服务器用于发布程序包，而 IIS 服务器用于流式处理程序包和应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-139">In this scenario, the App-V Management Server is used for publishing the packages, and the IIS server is used for streaming packages and applications.</span></span> <span data-ttu-id="a5d38-140">将原始程序包导入管理服务器时，管理员会将包含由 sequencer 创建的文件的程序包文件夹复制到 "内容" 文件夹中，例如 "\\\\server\\CONTENT\\packagename."。</span><span class="sxs-lookup"><span data-stu-id="a5d38-140">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="a5d38-141">管理员编辑 OSD 文件中的 HREF 条目，使其指向 IIS 服务器上的 SFT 文件，然后将程序包导入管理服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-141">The administrator edits the HREF entry in the OSD file so it points to the SFT file on the IIS server, and then imports the package to the Management Server.</span></span>

<span data-ttu-id="a5d38-142">若要设置用于流式处理的 IIS 服务器，管理员将程序包文件夹从管理服务器复制到 IIS 服务器上的内容文件夹。</span><span class="sxs-lookup"><span data-stu-id="a5d38-142">To set up the IIS server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the IIS Server.</span></span> <span data-ttu-id="a5d38-143">在管理服务器上，此文件夹必须具有与 IIS 服务器的 Web 内容文件夹相同的名称和相对路径;例如，可以使用 or 访问 IIS 服务器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。</span><span class="sxs-lookup"><span data-stu-id="a5d38-143">This folder must have the same name and relative path under the IIS server’s Web Content folder as on the Management Server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="a5d38-144">如果客户端的 "应用程序源根（ASR）" 设置配置为指向 IIS 服务器，客户端将在 OSD 文件的 HREF 条目中使用 ASR，而不是服务器名称。</span><span class="sxs-lookup"><span data-stu-id="a5d38-144">If the client’s Application Source Root (ASR) setting is configured to point to the IIS Server, the client uses the ASR instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="a5d38-145">你可以选择将客户端上的 ISR 和 OSR 字段配置为指向管理服务器或 IIS 服务器，具体取决于你使用的特定系统体系结构。</span><span class="sxs-lookup"><span data-stu-id="a5d38-145">You can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the IIS Server, depending on the specific system architecture that you use.</span></span>

<span data-ttu-id="a5d38-146">当管理服务器对用户进行身份验证时，服务器将通过向客户端发送 applist.xml 文件来发布用户的应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-146">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="a5d38-147">客户端从 IIS 服务器或管理服务器检索应用程序的 OSD 文件和图标，具体取决于 ISR 和 OSR 字段中的设置。</span><span class="sxs-lookup"><span data-stu-id="a5d38-147">The client retrieves the OSD files and icons for the applications from either the IIS Server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="a5d38-148">当用户双击应用程序图标时，客户端将使用包含在 OSD 文件 HREF 元素中的程序包内容文件（SFT）的路径。</span><span class="sxs-lookup"><span data-stu-id="a5d38-148">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="a5d38-149">如果使用 ASR，客户端会将 HREF 元素中的服务器名称（以及端口和协议，如果使用）替换为在 ASR 中指定的 IIS 服务器的路径。</span><span class="sxs-lookup"><span data-stu-id="a5d38-149">If the ASR is used the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the IIS Server that is specified in the ASR.</span></span> <span data-ttu-id="a5d38-150">然后，使用 HTTP （S）协议将应用程序从 IIS 服务器传输到客户端缓存，并启动该应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-150">The application is then streamed from the IIS server to the client cache by using the HTTP(S) protocol and is started.</span></span>

### <span data-ttu-id="a5d38-151">升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-151">To upgrade the package</span></span>

<span data-ttu-id="a5d38-152">升级程序包的过程如下所示：</span><span class="sxs-lookup"><span data-stu-id="a5d38-152">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="a5d38-153">将新版本的 OSD 文件复制到管理服务器的内容文件夹下的原始版本的文件夹（例如 \\\\server\\CONTENT\\packagename），并替换现有的 OSD 文件。</span><span class="sxs-lookup"><span data-stu-id="a5d38-153">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, and replace the existing OSD file.</span></span> <span data-ttu-id="a5d38-154">为了保持一致性，还应复制任何其他已修改的文件。</span><span class="sxs-lookup"><span data-stu-id="a5d38-154">For consistency, copy any other modified files, too.</span></span> <span data-ttu-id="a5d38-155">如果使用客户端的 OSR 或 ISR 字段，则还会将更新的 OSD 文件和图标复制到 "OSR" 和 "ISR" 字段中指定的服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-155">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="a5d38-156">将新版本的 SFT 文件复制到 IIS 服务器上 "Web 内容" 文件夹下的 "软件包" 文件夹中;例如，可以使用 or 访问 IIS 服务器上的 URL http://IISserver/CONTENT/packagename https://IISserver/CONTENT/packagename 。</span><span class="sxs-lookup"><span data-stu-id="a5d38-156">Copy the new version of the SFT file to the package folder under the Web Content folder on the IIS server; for example, the URL on the IIS Server can be accessed by using http://IISserver/CONTENT/packagename or https://IISserver/CONTENT/packagename.</span></span>

<span data-ttu-id="a5d38-157">下一次发布刷新时，客户端将更新为新版本的 OSD 文件。</span><span class="sxs-lookup"><span data-stu-id="a5d38-157">At the next publishing refresh, the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="a5d38-158">此文件现在指向 SFT 文件的新版本;因此，当用户下次双击应用程序图标时，将启动新版本。</span><span class="sxs-lookup"><span data-stu-id="a5d38-158">This file now points to the new version of the SFT file; therefore, when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="a5d38-159">使用管理服务器发布和用于流式处理的文件共享</span><span class="sxs-lookup"><span data-stu-id="a5d38-159">Using a Management Server for publishing and a File Share for Streaming</span></span>


<span data-ttu-id="a5d38-160">在此方案中，app-v 管理服务器用于发布程序包，文件服务器用于流式处理程序包和应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-160">In this scenario, the App-V Management Server is used for publishing the packages, and the file server is used for streaming packages and applications.</span></span> <span data-ttu-id="a5d38-161">将原始程序包导入管理服务器时，管理员会将包含由 sequencer 创建的文件的程序包文件夹复制到 "内容" 文件夹中，例如 "\\\\server\\CONTENT\\packagename."。</span><span class="sxs-lookup"><span data-stu-id="a5d38-161">When the original package is imported to the Management Server, the administrator copies the package folder that contains the files created by the sequencer to the CONTENT folder, for example, to \\\\server\\CONTENT\\packagename.</span></span> <span data-ttu-id="a5d38-162">管理员编辑 OSD 文件中的 HREF 条目，以使其指向文件服务器上的 SFT 文件，并将程序包导入到管理服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-162">The administrator edits the HREF entry in the OSD file so that it points to the SFT file on the file server, and imports the package to the Management Server.</span></span>

<span data-ttu-id="a5d38-163">若要设置用于流处理的文件服务器，管理员将程序包文件夹从管理服务器复制到文件服务器上的内容文件夹。</span><span class="sxs-lookup"><span data-stu-id="a5d38-163">To set up the file server for streaming, the administrator copies the package folder from the Management Server to the CONTENT folder on the file server.</span></span> <span data-ttu-id="a5d38-164">此文件夹在管理服务器上的文件服务器内容文件夹下必须具有相同的名称和相对路径，例如 \\\\fileserver\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="a5d38-164">This folder must have the same name and relative path under the file server’s CONTENT folder as on the Management Server, for example \\\\fileserver\\CONTENT\\packagename.</span></span>

<span data-ttu-id="a5d38-165">如果客户端的应用程序源根（ASR）设置配置为使用 UNC 路径指向文件服务器（例如 \\\\fileserver\\content），客户端将使用此设置，而不是在 OSD 文件中的 HREF 条目中使用服务器名称。</span><span class="sxs-lookup"><span data-stu-id="a5d38-165">If the client’s Application Source Root (ASR) setting is configured to point to the file server by using a UNC path, for example \\\\fileserver\\content, the client uses this setting instead of the server name in the HREF entry in the OSD file.</span></span> <span data-ttu-id="a5d38-166">管理员可以选择将客户端上的 ISR 和 OSR 字段配置为指向管理服务器或文件服务器，具体取决于所使用的特定系统体系结构。</span><span class="sxs-lookup"><span data-stu-id="a5d38-166">The administrator can optionally configure the ISR and OSR fields on the client to point to either the Management Server or the file server, depending on the specific system architecture being used.</span></span>

<span data-ttu-id="a5d38-167">当管理服务器对用户进行身份验证时，服务器将通过向客户端发送 applist.xml 文件来发布用户的应用程序。</span><span class="sxs-lookup"><span data-stu-id="a5d38-167">When the Management Server authenticates the user, the server publishes the user’s applications by sending the applist.xml file to the client.</span></span> <span data-ttu-id="a5d38-168">客户端从文件服务器或管理服务器检索应用程序的 OSD 文件和图标，具体取决于 ISR 和 OSR 字段中的设置。</span><span class="sxs-lookup"><span data-stu-id="a5d38-168">The client retrieves the OSD files and icons for the applications from either the file server or the Management Server, depending on the settings in the ISR and OSR fields.</span></span>

<span data-ttu-id="a5d38-169">当用户双击应用程序图标时，客户端将使用包含在 OSD 文件 HREF 元素中的程序包内容文件（SFT）的路径。</span><span class="sxs-lookup"><span data-stu-id="a5d38-169">When the user double-clicks an application icon, the client uses the path to the package content file (SFT) that is contained in the OSD file HREF element.</span></span> <span data-ttu-id="a5d38-170">如果使用 ASR，客户端将使用在 ASR 中指定的文件服务器的路径替换 HREF 元素中的服务器名称（以及端口和协议，如果使用）。</span><span class="sxs-lookup"><span data-stu-id="a5d38-170">If the ASR is used, the client replaces the server name (and port and protocol, if used) in the HREF element with the path to the file server that is specified in the ASR.</span></span> <span data-ttu-id="a5d38-171">然后，应用程序从文件服务器传输到客户端缓存并启动。</span><span class="sxs-lookup"><span data-stu-id="a5d38-171">The application is then streamed from the file server to the client cache and is started.</span></span>

### <span data-ttu-id="a5d38-172">升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-172">To upgrade the package</span></span>

<span data-ttu-id="a5d38-173">升级程序包的过程如下所示：</span><span class="sxs-lookup"><span data-stu-id="a5d38-173">The procedure to upgrade the package is as follows:</span></span>

-   <span data-ttu-id="a5d38-174">将新版本的 OSD 文件复制到管理服务器的内容文件夹下的原始版本的文件夹中，例如 \\\\server\\CONTENT\\packagename 替换现有的 OSD 文件。</span><span class="sxs-lookup"><span data-stu-id="a5d38-174">Copy the new version of the OSD file to the original version’s folder under the Management Server’s CONTENT folder, for example \\\\server\\CONTENT\\packagename, replacing the existing OSD file.</span></span> <span data-ttu-id="a5d38-175">还应复制任何其他已修改的文件，以便保持一致性。</span><span class="sxs-lookup"><span data-stu-id="a5d38-175">Any other modified files should be copied as well for consistency.</span></span> <span data-ttu-id="a5d38-176">如果使用客户端的 OSR 或 ISR 字段，则还会将更新的 OSD 文件和图标复制到 "OSR" 和 "ISR" 字段中指定的服务器。</span><span class="sxs-lookup"><span data-stu-id="a5d38-176">If the client’s OSR or ISR fields are used, then also copy the updated OSD file and icons to the server that is specified in the OSR and ISR fields.</span></span>

-   <span data-ttu-id="a5d38-177">将新版本的 SFT 文件复制到文件服务器上 "内容" 文件夹下的程序包文件夹，例如 \\\\fileserver\\CONTENT\\packagename。</span><span class="sxs-lookup"><span data-stu-id="a5d38-177">Copy the new version of the SFT file to the package folder under the CONTENT folder on the file server, for example \\\\fileserver\\CONTENT\\packagename.</span></span> <span data-ttu-id="a5d38-178">将 V2 SFT 文件复制到文件服务器上内容共享下的文件夹，例如 \\\\fileserver\\CONTENT\\packagename\\V1。</span><span class="sxs-lookup"><span data-stu-id="a5d38-178">Copy the V2 SFT file to the folder under the CONTENT share on the file server, for example \\\\fileserver\\CONTENT\\packagename\\V1.</span></span>

<span data-ttu-id="a5d38-179">下一次发布时，将用新版本的 OSD 文件更新客户端。</span><span class="sxs-lookup"><span data-stu-id="a5d38-179">At the next publishing refresh the client is updated with the new version of the OSD file.</span></span> <span data-ttu-id="a5d38-180">此文件现在指向新版本的 SFT 文件，因此当用户下次双击应用程序图标时，将启动新版本。</span><span class="sxs-lookup"><span data-stu-id="a5d38-180">This file now points to new version of the SFT file, so when the user next double-clicks an application icon, the new version is started.</span></span>

## <span data-ttu-id="a5d38-181">使用 MSI 流模式升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-181">Upgrading the package by using MSI Streaming mode</span></span>


<span data-ttu-id="a5d38-182">在对程序包进行排序期间生成 Windows Installer （MSI）文件时，sequencer 将创建一个。MSI 文件，其中包含所有必需的发布信息。</span><span class="sxs-lookup"><span data-stu-id="a5d38-182">When you generate a Windows Installer (MSI) file during sequencing a package, the sequencer creates a .MSI file that contains all the necessary publishing information.</span></span> <span data-ttu-id="a5d38-183">管理员必须复制。MSI 文件到客户端和。将包含程序包内容的 SFT 文件包含在客户端计算机可访问的网络共享中。</span><span class="sxs-lookup"><span data-stu-id="a5d38-183">The administrator must copy the .MSI file to the client and the .SFT file containing the package content to a network share accessible by the client computer.</span></span>

<span data-ttu-id="a5d38-184">若要将应用程序发布到客户端，请在客户端计算机上运行以下命令：</span><span class="sxs-lookup"><span data-stu-id="a5d38-184">To publish the application to the client, run the following command on the client computer:</span></span>

   **<span data-ttu-id="a5d38-185">Msiexec.exe/i \\\\PathToMsi\\packagename.msi MODE = 流式处理 OVERRIDEURL = \\\\\\\\server\\share\\package.sft</span><span class="sxs-lookup"><span data-stu-id="a5d38-185">Msiexec.exe /i \\\\PathToMsi\\packagename.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package.sft</span></span>**

<span data-ttu-id="a5d38-186">所.MSI 文件将应用程序发布到客户端，然后将其流式处理。SFT 文件到客户端缓存。</span><span class="sxs-lookup"><span data-stu-id="a5d38-186">The .MSI file publishes the applications to the client and then streams the .SFT file to the client cache.</span></span>

### <span data-ttu-id="a5d38-187">升级程序包</span><span class="sxs-lookup"><span data-stu-id="a5d38-187">To upgrade the package</span></span>

<span data-ttu-id="a5d38-188">若要添加新版本，管理员必须部署新版本。MSI 文件到客户端和新的。SFT 文件到网络共享。</span><span class="sxs-lookup"><span data-stu-id="a5d38-188">To add a new version, an administrator must deploy a new .MSI file to the client and a new .SFT file to the network share.</span></span> <span data-ttu-id="a5d38-189">然后，管理员必须运行用于部署程序包的相同命令，但使用 "新建"。MSI 文件和新文件。SFT 文件，例如：</span><span class="sxs-lookup"><span data-stu-id="a5d38-189">The administrator must then run the same command used to deploy the package, but use the new .MSI file and the new .SFT file, for example:</span></span>

   **<span data-ttu-id="a5d38-190">Msiexec.exe/i \\\\PathToMsi\\packagename\_2.msi MODE = 流式处理 OVERRIDEURL = \\\\\\\\server\\share\\package\_2.sft</span><span class="sxs-lookup"><span data-stu-id="a5d38-190">Msiexec.exe /i \\\\PathToMsi\\packagename\_2.msi MODE=STREAMING OVERRIDEURL=\\\\\\\\server\\share\\package\_2.sft</span></span>**

 

 





