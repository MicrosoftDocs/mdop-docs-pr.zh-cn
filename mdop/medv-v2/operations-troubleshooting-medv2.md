---
title: 操作疑难解答
description: 操作疑难解答
author: dansimp
ms.assetid: 948d7869-accd-44da-974f-93409234dee7
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: 126b5fae517c59914dcb7fb155ef4ad47278b5bd
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/26/2020
ms.locfileid: "10798121"
---
# 操作疑难解答


本主题包含可用于帮助解决 Microsoft 企业桌面虚拟化（MED-V）2.0 中的常规操作问题的信息。

## 对 MED-V 操作中的问题进行故障排除


当最终用户运行 MED-V 和解决方案来帮助解决这些问题时，可能会遇到以下问题：

**文档重定向失败**。 当最终用户的 "我的文档" 文件夹指向网络位置时，通常会出现此问题。 Windows 不支持从另一个共享文件夹创建共享。 当驱动器或文件夹被重定向到来宾时，RDP\\Windows Virtual PC 将为该文件夹创建一个共享。 因此，如果主机上的 "我的文档" 文件夹已指向共享，RDP\\Windows Virtual PC 无法创建共享共享。

导致此问题的另一个可能原因是连接到网络资源所需的凭据可能与用户的域凭据不同。 MED-V 可能检测到在主机上已重定向文档、将该信息发送给来宾，然后尝试重新连接网络资源。 如果用户的凭据不进行身份验证，则 MED-V 可能会停止尝试进行身份验证。

**解决方案**

若要解决此问题，请尝试以下操作之一：

-   在 Active Directory 内设置用户的 root 目录。 然后，来宾和主机将连接到同一网络资源。

-   不要将 "我的文档" 文件夹重定向到 UNC 路径，而是将其映射到驱动器号（在主机上，映射指向网络资源的驱动器）。 然后，可以将 "我的文档" 文件夹设置为使用驱动器号，而不是 UNC 路径。 然后，来宾将重定向到所需的同一映射驱动器。

-   在来宾中创建一个启动脚本，该脚本可将 "我的文档" 文件夹重定向到网络资源，并根据需要提供其他凭据。

**URL 重定向失败**。 你为从主机重定向到来宾而指定的 URL 未按预期重定向或返回一条错误消息，指示网站不存在。

**解决方案**

如果在 URL 重定向信息中有拼写错误或错误地使用了星号（\ *）等字符，则可能会发生此错误。 检查 URL 重定向的注册表值并更正任何错误。

注册表项的调用 `RedirectUrls` 通常位于以下位置：

Computer\\HKEY\ _LOCAL \ _MACHINE \\SOFTWARE\\Microsoft\\MEDV\\v2\\UserExperience

**任务栏中的图标令人误解**。 默认情况下，在最终用户的任务栏中显示已发布的应用程序和重定向的 Url 的图标是 Windows 虚拟 PC 的图标。 如果最终用户不知道此默认行为，则在查看任务栏找到其应用程序时，它们可能会变得混乱。

**解决方案**

避免此默认行为的唯一方法是更改任务栏属性的用户设置，如下所示：

1.  右键单击任务栏，然后单击 "**属性**"。

2.  在**任务栏和 "开始菜单属性**" 对话框中，单击 "**任务栏**" 选项卡。

3.  在 "**任务栏按钮**" 框的下拉栏中，选择 "**从不合并**"。

4.  单击“确定”****。

将显示已发布应用程序和重定向 Url 的预期图标。

**如果第二次用户尝试登录或虚拟机正在使用，则发出警告**。 当第一个用户仍在运行 MED-V 时，当第二个用户登录到 MED-V 工作区时，将发出一条警告消息。 如果在使用虚拟机时启动 MED-V （例如，如果虚拟机通过 "**开始**" 菜单上的 WINDOWS virtual PC 启动），也会发出此警告。 当最终用户接受警告消息时，MED-V 会关闭。

**解决方案**

最终用户必须先验证所有其他用户是否已注销 MED-V，然后再尝试登录。 这可确保不会运行 MED-V 的任何其他实例，并且 Windows 虚拟 PC 不受虚拟机的控制。

**首次设置时听到声响**。 在某些情况下，系统会在安装时首次运行时听到嘟嘟声。 这可能会使最终用户感到困惑。 在执行某些操作（如关闭）时，嘟嘟声来自虚拟机。

**解决方案**

你可以通过在每个虚拟机启动序列的开头指定 "net stop 嘟嘟声" 命令来停止声响服务。 或者，您可以通过指定 "sc config 提示开始 = 禁用" 命令禁用声响服务。 在密封图像之前或作为 Sysprep 的一部分，您可以指定这些命令。

**在桥接模式下为 Med-v 工作区创建的多个网络连接**。 如果首次设置创建的 MED-V 工作区是为 NAT 模式配置的，它仅在 Windows 虚拟 PC 中创建单个网络连接。 但是，如果首次设置创建的 MED-V 工作区是为桥接模式配置的，则它将为计算机上安装的每个网络适配器创建单独的网络连接，因为 MED-V 无法确定哪个网络适配器处于活动状态。 这还可确保漫游用户始终具有可用于有线和无线连接的网络适配器。

**解决方案**

无。

**在关闭时，Med-v 应用程序的响应时间太长**。 在某些情况下，MED-V 应用程序在尝试关闭时停止响应。

**解决方案**

你可以通过在来宾虚拟机中设置 WaitToKillAppTimeout 注册表项来指定 MED-V 等待关闭未响应的应用程序的时间长度。 有关详细信息，请参阅[如何延长关闭时间，以便进程可以在 WINDOWS XP 中正常退出](https://go.microsoft.com/fwlink/?LinkId=206819)（ https://go.microsoft.com/fwlink/?LinkId=206819) 。

**在来宾虚拟机中重命名已发布的应用程序快捷方式不会更改主机中已发布的名称**。 通过创建快捷方式并在来宾虚拟机中重命名快捷方式来发布应用程序时，原始应用程序名称将保留在主机 "**开始**" 菜单中。 程序将继续按预期运行，但程序将始终保留原始名称。

**解决方案**

无。 这是 Windows 虚拟电脑的已知行为。

**在来宾虚拟机中移动快捷方式不会更新主机计算机 "开始" 菜单上的位置**。 发布到主计算机 "**开始**" 菜单的 "med-v" 应用程序快捷方式在注册表中被编录。 如果将应用程序快捷方式移动到子文件夹中，则不会更新注册表以反映所做的更改。

**解决方案**

请按照以下步骤更改 MED-V 应用程序快捷方式的位置：

1.  当 MED-V 正在运行时，请在 MED-V 来宾虚拟机上打开 Windows 资源管理器。

2.  浏览到 "%ALLUSERSPROFILE%\\Start Menu\\Programs" 目录。

3.  将应用程序快捷方式移出 "startmenu" 或 "程序" 文件夹。

4.  大约30秒后，验证是否已从主机 "**开始**" 菜单中删除快捷方式。

5.  将应用程序快捷方式移回 "开始 Menu\\Programs" 目录下的新程序文件夹。

6.  大约30秒后，验证在主机 "**开始**" 菜单中是否更新了快捷方式。

**已发布的应用程序在处于空闲状态后可能会超时**。 在某些情况下，如果已发布的应用程序有一段时间空闲，他们将会超时。 只有在启用了 IPsec 且为 NAT 模式配置了 MED-V 工作区时，才会出现此情况。 如果在桥接模式下运行，则不会发生这种情况。

**解决方案**

在 NAT 模式下运行 MED-V 工作区时，禁用 IPsec。

**将已发布的应用程序固定到任务栏将绕过 med-v**。 如果最终用户将已发布的应用程序固定到任务栏，然后关闭该应用程序，则下次从任务栏图标中打开该应用程序时，将跳过 MED-V。 而是直接在 VMSAL 窗口中打开应用程序。

**解决方案**

不要将 MED-V 中发布的应用程序固定到任务栏。

## 相关主题


[MED-V 操作的安全最佳方案](security-best-practices-for-med-v-operations.md)

[部署疑难解答](deployment-troubleshooting.md)

 

 





