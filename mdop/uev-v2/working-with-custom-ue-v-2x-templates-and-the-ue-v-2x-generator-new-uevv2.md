---
title: 使用自定义 UE-V x 模板和 UE-V 2 版生成器
description: 使用自定义 UE-V x 模板和 UE-V 2 版生成器
author: dansimp
ms.assetid: f0bb4920-0132-472c-a564-abf06a884275
ms.reviewer: ''
manager: dansimp
ms.author: dansimp
ms.pagetype: mdop, virtualization
ms.mktglfcycl: deploy
ms.sitesec: library
ms.prod: w10
ms.date: 08/30/2016
ms.openlocfilehash: a8d863896e4ccfa92161f8a8f5e2b8955f139872
ms.sourcegitcommit: 354664bc527d93f80687cd2eba70d1eea024c7c3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/26/2020
ms.locfileid: "10802159"
---
# 使用自定义 UE-V x 模板和 UE-V 2 版生成器


若要在用户计算机之间同步应用程序设置，Microsoft 用户体验虚拟化（UE-V）2.0、2.1 和 2.1 SP1 使用*设置位置模板*。 某些设置位置模板包含在用户体验虚拟化中。 你还可以使用 UE-V 生成器创建、编辑或验证自定义设置位置模板。

UE-V 生成器监视 Windows 桌面应用程序以发现和捕获应用程序存储其设置的位置。 受监视的应用程序必须是桌面应用程序。 UE-V 生成器无法为以下应用程序类型创建设置位置模板：

-   虚拟化应用程序

-   通过终端服务提供的应用程序

-   Java 应用程序

-   Windows 应用

本主题 

**标准和非标准设置位置：** UE-V 生成器可帮助你识别应用程序在何处搜索应用程序用于存储设置信息的设置文件和注册表设置。 生成器仅发现标准用户可以访问的位置中的设置。 将排除存储在其他位置中的设置。 已发现的设置分为两类：**标准**和**非标准**。 建议使用标准设置进行同步，并且 UE-V 可以随时捕获和应用它们。 非标准设置可能会同步设置，但由于 UE-V 使用的规则，这些设置可能不会持续或 dependably 同步设置。 这些设置可能依赖于临时文件、导致不可靠的同步，或者可能不起作用。 这些设置位置显示在 UE-V 生成器中。 你可以选择逐个案例包括或排除它们。

UE-V 生成器将在发现过程中打开应用程序。 生成器可以捕获以下位置中的设置：

-   **注册表设置**- **HKEY \ _CURRENT \ _USER**下的注册表位置

-   **应用程序设置文件**-存储在 \\**用户**\\ [用户名 \] \\ **AppData**  \\  **漫游**中的文件

UE-V 生成器排除位置，这些位置通常存储应用程序软件文件，但在用户计算机或环境之间不会很好地同步。 UE-V 生成器将排除这些位置。 排除的位置如下所示：

-   HKEY \ _CURRENT 已登录用户无法向其写入值的 _USER 注册表项和文件

-   HKEY \ _CURRENT \ _USER 与 Windows 操作系统的核心功能相关联的注册表项和文件

-   位于 HKEY \ _LOCAL \ _MACHINE 配置单元中的所有注册表项，这需要管理员权限，并且可能需要设置用户帐户控制（UAC）协议

-   位于 "Program Files" 目录中的文件，这些文件需要管理员权限，并且可能需要设置 UAC 协议

-   位于 Users \\ [User name \] \\ AppData \\ LocalLow 下的文件

-   位于% Systemroot% 中的 Windows 操作系统文件，需要管理员权限，并且可能需要设置 UAC 协议

如果在这些位置中存储的注册表项和文件是同步应用程序设置所必需的，则可以在模板创建过程中手动将排除的位置添加到设置位置模板（HKEY \ _LOCAL \ _MACHINE 配置单元中的注册表项除外）。

## <a href="" id="edit"></a>通过 UE-V 发电机编辑设置位置模板


使用 UE-V 生成器编辑设置位置模板。 通过使用 UE-V 生成器将修改后的设置添加到模板时，模板内的版本信息将自动更新，以确保在企业中部署的任何现有模板都能正确更新。

**注意** 如果您使用 UE-V 2 生成器编辑 UE-V 1.0 模板，该模板将自动转换为 UE-V 2 模板。 UE-V 1.0 代理无法再使用已编辑的模板。

 

**使用 UE-V 发生器编辑 UE-V 设置位置模板**

1.  依次单击 "**开始**"、"**所有程序**"、" **microsoft 用户体验虚拟化**"，然后单击 " **microsoft 用户体验虚拟化生成器**"。

2.  单击 "**编辑设置位置模板**"。

3.  在最近使用的模板列表中，选择要编辑的模板。 或者，单击 "**浏览**" 以搜索设置模板文件。 单击**下一步**以继续。

4.  查看设置模板的**属性**、**注册表**位置和**文件**位置。 根据需要进行编辑。

    -   在 "**属性**" 选项卡上，您可以查看和编辑以下属性：

        -   **应用程序名称**：在程序文件属性的描述中写入的应用程序名称。

        -   **程序名称**：从程序文件属性中获取的程序的名称。 此名称通常具有 .exe 文件扩展名。

        -   **产品版本**：应用程序的 .exe 文件的产品版本号。 此属性与**文件版本**一起可帮助确定设置位置模板面向的应用程序。 此属性接受主版本号。 如果此属性为空，则设置位置模板适用于产品的所有版本。

        -   **文件版本**：应用程序的 .exe 文件的文件版本号。 此属性与**产品版本**一起有助于确定设置位置模板面向的应用程序。 此属性接受主版本号。 如果此属性为空，则设置位置模板将应用于该程序的所有版本。

        -   **模板作者名称**（可选）：设置模板作者的名称。

        -   **模板作者电子邮件**（可选）：设置位置模板作者的电子邮件地址。

    -   "**注册表**" 选项卡列出了 "设置位置" 模板中包含的注册表位置的**密钥**和**范围**。 可以使用 "**任务**" 下拉菜单编辑注册表位置。 在 "任务" 菜单中，你可以添加新密钥、编辑现有密钥的名称或范围、删除密钥，以及浏览注册表中的键所在的注册表。 定义注册表的范围时，可以使用 "**所有设置**" 范围将所有注册表设置包含在指定键下。 使用**所有设置**和**子项**将所有注册表设置包含在指定项、子项和子项设置下。

    -   "**文件**" 选项卡列出了 "设置位置" 模板中包含的文件位置的文件路径和文件掩码。 可以使用 "**任务**" 下拉菜单编辑文件位置。 在文件位置的 "**任务**" 菜单中，你可以添加新文件或文件夹位置、编辑现有文件或文件夹的范围、删除文件或文件夹，以及在 Windows 资源管理器中打开所选位置。 若要包括指定文件夹中的所有文件，请将文件掩码保留为空。

5.  单击 "**保存**" 以将更改保存到 "设置位置" 模板。

6.  单击 "**关闭**" 以关闭 "设置模板" 向导。 退出 UE-V 发生器应用程序。

    编辑应用程序的设置位置模板后，应测试该模板。 在实验室环境中部署已修改的设置位置模板，然后再将其放入企业中的 "生产" 中。

**如何手动编辑设置位置模板**

1.  创建设置位置模板 .xml 文件的本地副本。 UE-V 设置位置模板是 .xml 文件，用于标识应用商店设置值的位置。

    **注意** 由于模板**ID**的原因，设置位置模板是唯一的。 如果复制模板并重命名 .xml 文件，则模板注册将失败，因为 UE-V 会读取 .xml 文件中的模板**ID**标记以确定该名称，而不是 .xml 文件的文件名。 UE-V 还会读取**版本号**以了解是否有任何更改。 如果版本号较高，则 UE-V 会更新模板。

     

2.  使用 XML 编辑器打开 "设置位置" 模板文件。

3.  编辑设置位置模板文件。 所有更改都必须符合[SettingsLocationTempate](https://technet.microsoft.com/library/dn763947.aspx)中定义的 ue-v 架构文件。 默认情况下，.xsd 文件的副本位于 \\ProgramData\\Microsoft\\UEV\\Templates. 中。

4.  递增设置位置模板的**版本号**。

5.  保存设置位置模板文件，然后关闭 "XML 编辑器"。

6.  使用 UE-V 生成器验证修改后的设置位置模板文件。

7.  必须先注册已编辑的 UE-V 设置位置模板，然后它才能同步客户端计算机之间的设置。 若要注册模板，请打开 Windows PowerShell，然后运行以下 cmdlet： `update-uevtemplate [templatefilename]` 。 然后，你可以将文件复制到设置存储目录。 然后，用户计算机上的 UE-V Agent 将根据计划任务中的计划进行更新。

## <a href="" id="validate"></a>通过 UE-V 发电机验证设置位置模板


可以在 XML 编辑器中创建或编辑设置位置模板，而无需使用 UE-V 生成器。 如果执行此操作，则可以使用 UE-V 生成器验证新的或修改后的 XML 是否与已针对模板定义的架构相匹配。

**使用 UE-V 发生器验证 UE-V 设置位置模板**

1.  单击 "**开始**"，指向 "**所有程序**"，单击 " **microsoft 用户体验虚拟化**"，然后单击 " **microsoft 用户体验虚拟化生成器**"。

2.  单击 "**验证设置位置" 模板**。

3.  在最近使用的模板列表中，选择要编辑的模板。 或者，您也可以**浏览**到设置模板文件。 单击**下一步**以继续。

4.  单击 "**验证**" 以继续。

5.  单击 "**关闭**" 以关闭 "设置模板" 向导。 退出 UE-V 发生器应用程序。

    验证应用程序的设置位置模板后，应测试该模板。 在实验室环境中部署模板，然后再将其放入企业的生产环境中。

## <a href="" id="share"></a>与模板库共享设置位置模板


Microsoft 用户体验虚拟化（UE-V）2.0 模板库使管理员可以共享其 UE-V 设置位置模板。 在库中，你可以上载你的设置位置模板供其他用户使用，并且你可以下载其他用户创建的模板。 UE-V 模板库位于 Microsoft TechNet[此处](https://go.microsoft.com/fwlink/p/?LinkId=246589)。

在 UE-V 模板库上共享设置位置模板之前，请确保它不包含任何个人或公司信息。 可以使用任何 XML 查看器打开和查看设置位置模板文件的内容。 在与公司外部的任何人共享模板之前，应查看以下模板值。

-   模板作者名称-指定模板作者姓名的常规、非标识名称或从模板中排除此数据。

-   模板作者电子邮件-指定常规、非标识模板作者电子邮件或从模板中排除此数据。

在部署从 UE-V 库下载的任何设置位置模板之前，应首先测试模板以确保应用程序设置在测试环境中正确同步设置。






## 相关主题


[管理 UE-V 2. x](administering-ue-v-2x-new-uevv2.md)

[部署自定义应用程序的 UE-V 2。](deploy-ue-v-2x-for-custom-applications-new-uevv2.md)

 

 





